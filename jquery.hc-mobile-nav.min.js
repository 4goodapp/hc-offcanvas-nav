// jQuery HC-MobileNav
// =============
// Version: 1.2.1
// Copyright: Some Web Media
// Author: Some Web Guy
// Author URL: http://twitter.com/some_web_guy
// Website: http://someweblog.com/
// License: Released under the MIT License www.opensource.org/licenses/mit-license.php

(function(b,f,c){b(f);var g=f.document,k=b(g),l=function(){var b=(g.body||g.documentElement).style;return b.transition!==c||b.WebkitTransition!==c||b.MozTransition!==c||b.MsTransition!==c||b.OTransition!==c}();b.fn.extend({hcMobileNav:function(c){if(0==this.length)return this;var f=g.getElementsByTagName("html")[0],m=b(f),h=b(g.body);this.data("mobileNav")||this.data("mobileNav",{});this.each(function(){var e=b(this);e.data("mobileNav").settings?e.data("mobileNav",b.extend(e.data("mobileNav"),{settings:b.extend(e.data("mobileNav").settings,
c||{})})):e.data("mobileNav",{settings:b.extend({close:"Close",back:"Back"},c||{})})});return this.each(function(){var e=b(this),c=e.data("mobileNav").settings,d;e.after('<a id="menu-trigger">');d=e.is("ul")?e.clone().click(function(a){a.stopPropagation()}).wrap("<nav></nav>").parent():e.clone().click(function(a){a.stopPropagation()});d.removeAttr("id").addClass("mobile-nav").find("*").removeAttr("id");d.find("ul").wrap('<div class="menu-wrap"></div>');l||d.addClass("no-transition");b('<span class="next">').click(function(a){a.stopPropagation();
a.preventDefault();var c=b(this);a=c.parents("li").length;c=c.closest("li").addClass("open").closest(".menu-wrap");1===a&&0===c.length?d.addClass("submenu-open"):c.addClass("submenu-open");n(40*a);return!1}).appendTo(d.find("li").filter(function(){return 0<b(this).find("ul").length}).addClass("parent").children("a"));var f=d.find("ul");f.not(":first").prepend('<li class="menu-item back"><a href="#">'+c.back+"<span /></a></li>");f.first().prepend('<li class="menu-item close"><a href="#">'+c.close+
"<span /></a></li>");var n=function(a){l?(d[0].style.WebkitTransform="translate3d("+a+"px,0,0)",d[0].style.MozTransform="translate3d("+a+"px,0,0)",d[0].style.MsTransform="translate3d("+a+"px,0,0)",d[0].style.OTransform="translate3d("+a+"px,0,0)",d[0].style.transform="translate3d("+a+"px,0,0)"):d.css({left:a})},c=function(a){m.removeClass("yscroll");h.removeClass("open-menu notouchmove");d.find("li.open").removeClass("open");d.find(".submenu-open").removeClass("submenu-open");d.removeAttr("style")};
d.find("li.back").children("a").click(function(a){a.preventDefault();a=b(this);a.closest("li.open").removeClass("open");a.closest(".submenu-open").removeClass("submenu-open");a=b(this).parents("li").length-2;n(40*a)});h.prepend(d);k.on("click","body.open-menu",c);d.find("li.close").first().children("a").click(c);d.find('li:not(".close"):not(".back")').children("a").click(c);k.on("click","#menu-trigger",function(){g.body.scrollHeight>g.body.offsetHeight&&m.addClass("yscroll");h.addClass("open-menu notouchmove")});
e.addClass("hc-menu")})}})})(jQuery,this);
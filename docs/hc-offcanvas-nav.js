/*
 * HC Off-canvas Nav
 * ===================
 * Version: 4.0.0
 * Author: Some Web Media
 * Author URL: https://github.com/somewebmedia/
 * Plugin URL: https://github.com/somewebmedia/hc-offcanvas-nav
 * Description: jQuery plugin for creating off-canvas multi-level navigations
 * License: MIT
 */
"use strict";function _typeof(n){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}!function(J,n){var i,R=n.document,X=J(R.getElementsByTagName("html")[0]),Y=J(R),Z=(/iPad|iPhone|iPod/.test(navigator.userAgent)||!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))&&!n.MSStream,nn="ontouchstart"in n||navigator.maxTouchPoints||n.DocumentTouch&&R instanceof DocumentTouch,en=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},an=function(n){return n.stopPropagation()},tn=function(e){return function(n){n.preventDefault(),n.stopPropagation(),"function"==typeof e&&e()}},on=function(n,e,a){var t=a.children(),o=t.length,i=-1<e?Math.max(0,Math.min(e-1,o)):Math.max(0,Math.min(o+e+1,o));0===i?a.prepend(n):t.eq(i-1).after(n)},cn=function(n){return-1!==["left","right"].indexOf(n)?"x":"y"},ln=(i=function(n){var e=["Webkit","Moz","Ms","O"],a=(R.body||R.documentElement).style,t=n.charAt(0).toUpperCase()+n.slice(1);if(void 0!==a[n])return n;for(var o=0;o<e.length;o++)if(void 0!==a[e[o]+t])return e[o]+t;return!1}("transform"),function(n,e,a){if(i)if(0===e)n.css(i,"");else if("x"===cn(a)){var t="left"===a?e:-e;n.css(i,t?"translate3d(".concat(t,"px,0,0)"):"")}else{var o="top"===a?e:-e;n.css(i,o?"translate3d(0,".concat(o,"px,0)"):"")}else n.css(a,e)}),e=function(n,e,a){console.warn("%cHC Off-canvas Nav:%c "+a+"%c '"+n+"'%c is now deprecated and will be removed in the future. Use%c '"+e+"'%c option instead. See details about plugin usage at https://github.com/somewebmedia/hc-offcanvas-nav.","color: #fa253b","color: default","color: #5595c6","color: default","color: #5595c6","color: default")},rn=0;J.fn.extend({hcOffcanvasNav:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!this.length)return this;var Q=this,U=J(R.body);void 0!==n.maxWidth&&(e("maxWidth","disableAt","option"),n.disableAt=n.maxWidth);var z=J.extend({},{disableAt:!1,pushContent:!1,expanded:!1,position:"left",levelOpen:"overlap",levelActiveClass:"active",levelSpacing:40,levelTitles:!0,navTitle:null,navClass:"",disableBody:!0,closeOnClick:!0,customToggle:null,bodyInsert:"prepend",removeOriginalNav:!1,rtl:!1,insertClose:!0,insertBack:!0,levelTitleAsBack:!0,labelClose:"Close",labelBack:"Back"},n),K=[],V="nav-open",G=function(n){if(!K.length)return!1;var e=!1;"string"==typeof n&&(n=[n]);for(var a=n.length,t=0;t<a;t++)-1!==K.indexOf(n[t])&&(e=!0);return e};return this.each(function(){var e=J(this);if(e.find("ul").addBack("ul").length){var n,o,i,c,t,l,y="hc-nav-".concat(++rn),r=(n="hc-offcanvas-".concat(rn,"-style"),o=J('<style id="'.concat(n,'">')).appendTo(J("head")),i={},c={},t=function(n){return";"!==n.substr(-1)&&(n+=";"!==n.substr(-1)?";":""),n},{reset:function(){i={},c={}},add:function(n,e,a){n=n.trim(),e=e.trim(),a?(a=a.trim(),c[a]=c[a]||{},c[a][n]=t(e)):i[n]=t(e)},remove:function(n,e){n=n.trim(),e?(e=e.trim(),void 0!==c[e][n]&&delete c[e][n]):void 0!==i[n]&&delete i[n]},insert:function(){var n="";for(var e in c){for(var a in n+="@media screen and (".concat(e,") {\n"),c[e])n+="".concat(a," { ").concat(c[e][a]," }\n");n+="}\n"}for(var t in i)n+="".concat(t," { ").concat(i[t]," }\n");o.html(n)}}),s="keydown.hc-offcanvas-nav";e.addClass("hc-nav ".concat(y));var a,d,p,v=J('<nav role="navigation">').on("click",an),f=J('<div class="nav-container">').appendTo(v),u=null,h={},m=!1,g=!1,b=0,x=0,k=0,C=null,w={},O=[],T=!1,S=[];z.customToggle?l=J(z.customToggle).addClass("hc-nav-trigger ".concat(y)).on("click",F):(l=J('<a href="#" aria-label="Open Menu" class="hc-nav-trigger '.concat(y,'"><span></span></a>')).on("click",F),e.after(l)),l.attr("role","button").attr("aria-controls",y),l.on("keydown",function(n){"Enter"!==n.key&&13!==n.keyCode||setTimeout(function(){H(0,0)},0)}),Y.on("keydown",function(n){if(W()&&("Escape"===n.key||27===n.keyCode)){var e=O.length?f.find(".hc-chk").filter("[value=".concat(O[O.length-1],"]")).data("level"):!!W()&&0;0===e?_():(L(e),H(null,e-1))}});var B=function(){Y.off(s),l[0].focus()},N=function(){f.css("transition","none"),x=f.outerWidth(),k=f.outerHeight(),r.add(".hc-offcanvas-nav.".concat(y,".nav-position-left .nav-container"),"transform: translate3d(-".concat(x,"px, 0, 0)")),r.add(".hc-offcanvas-nav.".concat(y,".nav-position-right .nav-container"),"transform: translate3d(".concat(x,"px, 0, 0)")),r.add(".hc-offcanvas-nav.".concat(y,".nav-position-top .nav-container"),"transform: translate3d(0, -".concat(k,"px, 0)")),r.add(".hc-offcanvas-nav.".concat(y,".nav-position-bottom .nav-container"),"transform: translate3d(0, ".concat(k,"px, 0)")),r.insert(),f.css("transition",""),A()},A=function(){var n;a=f.css("transition-property").split(",")[0],n=f.css("transition-duration").split(",")[0],d=parseFloat(n)*(/\ds$/.test(n)?1e3:1),p=f.css("transition-timing-function").split(",")[0],z.pushContent&&u&&a&&r.add(function n(e){return"string"==typeof e?e:e.attr("id")?"#"+e.attr("id"):e.attr("class")?e.prop("tagName").toLowerCase()+"."+e.attr("class").replace(/\s+/g,"."):n(e.parent())+" "+e.prop("tagName").toLowerCase()}(z.pushContent),"transition: ".concat(a," ").concat(d,"ms ").concat(p)),r.insert()},P=function(n){var e=l.css("display"),a=!!z.disableAt&&"max-width: ".concat(z.disableAt-1,"px");G("disableAt")&&r.reset(),r.add(".hc-offcanvas-nav.".concat(y),"display: block",a),r.add(".hc-nav-trigger.".concat(y),"display: ".concat(e&&"none"!==e?e:"block"),a),r.add(".hc-nav.".concat(y),"display: none",a),r.add(".hc-offcanvas-nav.".concat(y,".nav-levels-overlap.nav-position-left li.level-open > .nav-wrapper"),"transform: translate3d(-".concat(z.levelSpacing,"px,0,0)"),a),r.add(".hc-offcanvas-nav.".concat(y,".nav-levels-overlap.nav-position-right li.level-open > .nav-wrapper"),"transform: translate3d(".concat(z.levelSpacing,"px,0,0)"),a),r.add(".hc-offcanvas-nav.".concat(y,".nav-levels-overlap.nav-position-top li.level-open > .nav-wrapper"),"transform: translate3d(0,-".concat(z.levelSpacing,"px,0)"),a),r.add(".hc-offcanvas-nav.".concat(y,".nav-levels-overlap.nav-position-bottom li.level-open > .nav-wrapper"),"transform: translate3d(0,".concat(z.levelSpacing,"px,0)"),a),r.insert(),(!n||n&&G("pushContent"))&&("string"==typeof z.pushContent?(u=J(z.pushContent)).length||(u=null):u=z.pushContent instanceof jQuery?z.pushContent:null),f.css("transition","none");var t=v.hasClass(V),o=["hc-offcanvas-nav",z.navClass||"",y,z.navClass||"","nav-levels-"+z.levelOpen||"none","nav-position-"+z.position,z.disableBody?"disable-body":"",Z?"is-ios":"",nn?"touch-device":"",t?V:"",z.rtl?"rtl":""].join(" ");v.off("click").attr("class","").attr("aria-hidden",!0).attr("aria-labelledby",y).addClass(o),z.disableBody&&v.on("click",_),n?N():setTimeout(N,0)},E=function(){var n;h=function l(n,e){var a=[];return n.each(function(){var n=J(this),c={id:e,classes:n.attr("class")||null,items:[]};n.children("li").each(function(){var n=J(this),e=void 0!==n.data("nav-custom-content"),a=e?n.children():n.children().filter(function(){var n=J(this);return n.is(":not(ul)")&&!n.find("ul").length}).add(n.contents().filter(function(){return 3===this.nodeType&&this.nodeValue.trim()})),t=e?J():n.find("ul"),o=t.first().add(t.first().siblings("ul")),i=null;o.length&&(n.data("hc-uniqid")?i=n.data("hc-uniqid"):(i=Math.random().toString(36).substr(2),n.data("hc-uniqid",i))),c.items.push({id:i,classes:n.attr("class")||null,$content:a,subnav:o.length?l(o,i):[],custom:e})}),a.push(c)}),a}((n=e.find("ul").addBack("ul")).first().add(n.first().siblings("ul")),null)},M=function(n){n&&(f.empty(),w={}),function h(n,e,m,g,a,t){var b=J('<div class="nav-wrapper nav-wrapper-'.concat(m,'" data-level="').concat(m,'" data-index="').concat(a||0,'">')).appendTo(e).on("click",an),o=J('<div class="nav-content">').appendTo(b);if(g&&o.prepend("<h2>".concat(g,"</h2>")),J.each(n,function(n,e){var u=J('<ul role="menu" aria-level="'.concat(m+1,'">')).addClass(e.classes).appendTo(o);0===n&&g&&u.attr("aria-label",g),e.id&&u.attr("aria-labelledby","menu-"+e.id),J.each(e.items,function(n,e){var a=e.$content;if(e.custom){var t=J('<li class="custom-content">').addClass(e.classes).append(J('<div class="nav-item nav-item-custom">').append(a.clone(!0,!0)));u.append(t)}else{var o=a.find("a").addBack("a"),i=o.length?o.clone(!1,!0).addClass("nav-item"):J("<".concat(e.subnav.length?'a href="#"':"span",' class="nav-item">')).append(a.clone(!0,!0)).on("click",an);i.is("a")&&i.attr("tabindex","0").attr("role","menuitem"),o.length&&i.on("click",function(n){n.stopPropagation(),(J._data(o[0],"events")||{}).click&&o[0].click()}),"#"===i.attr("href")&&i.on("click",function(n){n.preventDefault()}),z.closeOnClick&&(q()?i.filter("a").filter('[data-nav-close!="false"]:not([disabled])').filter(function(){var n=J(this);return!e.subnav.length||n.attr("href")&&"#"!==n.attr("href").charAt(0)}).on("click",_):i.filter("a").filter('[data-nav-close!="false"]:not([disabled])').on("click",_));var c=J("<li>").addClass(e.classes).append(i).appendTo(u);if(i.wrap('<div class="nav-item-wrapper">'),z.levelSpacing&&("expand"===z.levelOpen||!1===z.levelOpen||"none"===z.levelOpen)){var l=z.levelSpacing*m;l&&u.css("text-indent","".concat(l,"px"))}if(e.subnav.length){var r=m+1,s=e.id,d="";if(w[r]||(w[r]=0),c.addClass("nav-parent"),q()){var p=function(n){n.on("click",function(){f.prop("checked",!f.prop("checked")).trigger("change")}).on("keydown",function(n){"Enter"!==n.key&&13!==n.keyCode||(T=!0,S.push(J(this)))}).attr("aria-controls","menu-"+s).attr("aria-haspopup","overlap"===z.levelOpen).attr("aria-expanded",!1)},v=w[r],f=J('<input type="checkbox" id="'.concat(y,"-").concat(r,"-").concat(v,'" class="hc-chk" tabindex="-1">')).attr("data-level",r).attr("data-index",v).val(s).on("click",an).on("change",j).prependTo(c);-1!==O.indexOf(s)&&(b.addClass("sub-level-open").on("click",function(){return L(r,v)}),c.addClass("level-open"),f.prop("checked",!0)),d=!0===z.levelTitles?a.text().trim():"",i.attr("href")&&"#"!==i.attr("href")?p(J('<a href="#" class="nav-next" aria-label="'.concat(d,' Submenu" role="menuitem" tabindex="0">')).on("click",an).insertAfter(i)):(J('<span class="nav-next">').appendTo(i),p(i))}else i.attr("aria-expanded",!0);w[r]++,h(e.subnav,c,r,d,w[r]-1,g)}}})}),m&&void 0!==a&&!1!==z.insertBack&&"overlap"===z.levelOpen){var i=o.children("ul"),c=z.levelTitleAsBack&&t||z.labelBack||"",l=J('<li class="nav-back"><a href="#" role="menuitem" tabindex="0">'.concat(c,"<span></span></a></li>"));l.children("a").on("click",tn(function(){return L(m,a)})).on("keydown",function(n){"Enter"!==n.key&&13!==n.keyCode||(T=!0)}).wrap('<div class="nav-item-wrapper">'),!0===z.insertBack?i.first().prepend(l):en(z.insertBack)&&on(l,z.insertBack,i)}if(0===m&&!1!==z.insertClose){var r=o.children("ul"),s=J('<li class="nav-close"><a href="#" role="menuitem" tabindex="0">'.concat(z.labelClose||"","<span></span></a></li>"));s.children("a").on("click",tn(_)).wrap('<div class="nav-item-wrapper">'),!0===z.insertClose?r.first().prepend(s):en(z.insertClose)&&on(s,z.insertClose,r.first().add(r.first().siblings("ul")))}}(h,f,0,z.navTitle)};P(),E(),M(),!0===z.removeOriginalNav&&e.remove(),"prepend"===z.bodyInsert?U.prepend(v):"append"===z.bodyInsert&&U.append(v),!0===z.expanded&&(g=!0,$());var D=function(n,e,a){var t=J("#".concat(y,"-").concat(n,"-").concat(e)),o=t.val(),i=t.parent("li"),c=i.closest(".nav-wrapper");if(t.prop("checked",!1),c.removeClass("sub-level-open"),i.removeClass("level-open"),i.children(".nav-item-wrapper").children("[aria-controls]").attr("aria-expanded",!1),-1!==O.indexOf(o)&&O.splice(O.indexOf(o),1),a&&"overlap"===z.levelOpen&&(c.off("click").on("click",an),ln(f,(n-1)*z.levelSpacing,z.position),u)){var l="x"===cn(z.position)?x:k;ln(u,l+(n-1)*z.levelSpacing,z.position)}};Q.settings=function(n){return n?z[n]:Object.assign({},z)},Q.isOpen=W,Q.open=function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if($(),q()&&"number"==typeof n){var a=J("#".concat(y,"-").concat(n,"-").concat(e));if(!a.length)return void console.warn("HC Offcanvas Nav: level ".concat(n," doesn't have index ").concat(e));var t=[];1<n&&(a.parents(".nav-wrapper").each(function(){var n=J(this),e=n.data("level");0<e&&t.push({level:e,index:n.data("index")})}),t=t.reverse()),t.push({level:n,index:e});for(var o=0;o<t.length;o++)I(t[o].level,t[o].index,!1)}},Q.close=_,Q.update=function(n,e){if(K=[],"object"===_typeof(n)){for(var a in n)z[a]!==n[a]&&K.push(a);z=J.extend({},z,n)}if(!0===n||!0===e){if(z.removeOriginalNav)return void console.warn("%c! HC Offcanvas Nav:%c Can't update because original navigation has been removed. Disable `removeOriginalNav` option.","color: #fa253b","color: default");P(!0),E(),M(!0)}else P(!0),M(!0)}}else console.error("%c! HC Offcanvas Nav:%c Menu must contain <ul> element.","color: #fa253b","color: default");function H(n,e,a){if("number"==typeof e&&("number"==typeof n||S.length)){var t='[tabindex=0], a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select',o=f.find(".nav-wrapper").filter("[data-level=".concat(e,"]")).filter(function(){return"number"!=typeof a||J(this).is("[data-index=".concat(a,"]"))}).children(".nav-content").children("ul").children("li").children(":not(.nav-wrapper)").find(t).addBack(t).filter(":not([tabindex=-1])");if(o.length){console.log(o,e,a);var i=o.first(),c=o.last();"number"==typeof n?o.eq(n).focus():(S[S.length-1].focus(),S.pop()),Y.off(s),Y.on(s,function(n){("Tab"===n.key||9===n.keyCode)&&(n.shiftKey?R.activeElement===i[0]&&(n.preventDefault(),c.focus()):R.activeElement===c[0]&&(n.preventDefault(),i.focus()))})}}}function j(){var n=J(this),e=Number(n.attr("data-level")),a=Number(n.attr("data-index"));n.prop("checked")?I(e,a):L(e,a)}function q(){return!1!==z.levelOpen&&"none"!==z.levelOpen}function W(){return v.hasClass(V)}function $(){if(m=!0,v.css("visibility","visible").attr("aria-hidden",!1).addClass(V),l.addClass("toggle-open"),"expand"===z.levelOpen&&C&&clearTimeout(C),z.disableBody&&(b=X.scrollTop()||U.scrollTop(),R.documentElement.scrollHeight>R.documentElement.clientHeight&&X.addClass("hc-nav-yscroll"),U.addClass("hc-nav-open"),b&&U.css("top",-b)),u){var n="x"===cn(z.position)?x:k;ln(u,n,z.position)}g?g=!1:setTimeout(function(){Q.trigger("open",J.extend({},z))},d)}function _(){m=!1,u&&ln(u,0),v.removeClass(V).attr("aria-hidden",!0),f.removeAttr("style"),l.removeClass("toggle-open"),"expand"===z.levelOpen&&-1!==["top","bottom"].indexOf(z.position)?L(0):q()&&(C=setTimeout(function(){L(0)},"expand"===z.levelOpen?d:0)),z.disableBody&&(U.removeClass("hc-nav-open"),X.removeClass("hc-nav-yscroll"),b&&(U.css("top","").scrollTop(b),X.scrollTop(b),b=0)),B(),setTimeout(function(){v.css("visibility",""),Q.trigger("close.$",J.extend({},z)),Q.trigger("close.once",J.extend({},z)).off("close.once")},d)}function F(n){n.preventDefault(),n.stopPropagation(),m?_():$()}function I(n,e){var a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],t=J("#".concat(y,"-").concat(n,"-").concat(e)),o=t.val(),i=t.parent("li"),c=i.closest(".nav-wrapper"),l=i.children(".nav-wrapper");if(!1===a&&l.css("transition","none"),c.addClass("sub-level-open"),i.addClass("level-open"),i.children(".nav-item-wrapper").children("[aria-controls]").attr("aria-expanded",!0),!1===a&&setTimeout(function(){l.css("transition","")},d),-1===O.indexOf(o)&&O.push(o),"overlap"===z.levelOpen&&(c.on("click",function(){return L(n,e)}),ln(f,n*z.levelSpacing,z.position),u)){var r="x"===cn(z.position)?x:k;ln(u,r+n*z.levelSpacing,z.position)}T&&(H(0,n,e),T=!1)}function L(n,e){for(var a=n;a<=Object.keys(w).length;a++)if(a==n&&void 0!==e)D(n,e,!0);else for(var t=0;t<w[a];t++)D(a,t,a==n);T&&(H(null,n-1),T=!1)}})}})}(jQuery,"undefined"!=typeof window?window:this);